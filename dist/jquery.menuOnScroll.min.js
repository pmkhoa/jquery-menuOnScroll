/*
 *  jQuery menuOnScroll - v0.1.0
 *  A jQuery plugin that allows you to auto update your navigation menu automatically when you scroll
 *  http://menuonscroll.com
 *
 *  Made by Khoa Pham
 *  Under MIT License
 */
!function(a){a.menuOnScroll=function(b,c){var d,e,f,g,h,i,j=this,k=a(b),l="ontouchstart"in window,m=0,n=new Array,o=new Array,p={menuActiveClass:"active",menuSelector:".menu-item",footerOffset:0,headerOffset:0,scrollOnClickOffset:20};j.init=function(){j.settings=i=a.extend({},p,c),j.run(),j.onResizeDone()},j.onResizeDone=function(){a(window).on("resize",function(){clearTimeout(h),resizeTimout=setTimeout(j.run(),300)})},j.run=function(){j.setDimension(),j.setMenuItems(),j.setContainerScrollTop(),j.updateMenuOnScroll(0),j.menuOnClick(),j.windowOnScroll()},j.windowOnScroll=function(){l===!0?j.touchScroll():j.mouseScroll()},j.touchScroll=function(){a(window).on({touchmove:function(){var b=a(this).scrollTop();b>=0&&j.updateMenuOnScroll(b)}})},j.mouseScroll=function(){a(window).on("scroll",function(){var b=a(this).scrollTop();b>=0&&j.updateMenuOnScroll(b)})},j.updateMenuOnScroll=function(b){j.setActiveMenuIndex(b),k.find("."+i.menuActiveClass).removeClass(i.menuActiveClass),a(d[m]).addClass(i.menuActiveClass)},j.menuOnClick=function(){a(i.menuSelector).find("a").on("click",function(b){if(b.preventDefault(),location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var c=a(this.hash);c=c.length?c:a("[name="+this.hash.slice(1)+"]");var d=this.hash.slice(1);j.scrollTo(c,d)}})},j.scrollTo=function(b,c){a("html,body").stop().animate({scrollTop:b.offset().top-i.scrollOnClickOffset},400,function(){history.pushState?history.pushState(null,null,"#"+c):window.location.hash="#"+c})},j.setMenuItems=function(){d=a(i.menuSelector),e=d.length},j.setDimension=function(){f=a(window).height(),g=a(document).height()},j.setContainerScrollTop=function(){for(var b=0;e>b;b++){var c=a(d[b]).find("a").attr("href");o[b]=a(c).outerHeight(),n[b]=0===b?0:o[b-1]+n[b-1]}},j.setActiveMenuIndex=function(a){a=i.headerOffset+a;for(var b=0;e>b;b++){if(a+f>g-i.footerOffset){m=e-1;break}if(a>=n[b]&&a<n[b+1]){m=b;break}m=e-1}}},a.fn.menuOnScroll=function(b){return this.each(function(){a(this);plugin=new a.menuOnScroll(this,b),plugin.init()})}}(jQuery);